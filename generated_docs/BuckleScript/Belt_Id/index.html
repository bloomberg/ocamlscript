<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Belt_Id (BuckleScript.Belt_Id)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="..">Up</a> – <a href="../">BuckleScript</a> &#x00BB; Belt_Id</nav><h1>Module <code>Belt_Id</code></h1><p><span class="xref-unresolved" title="unresolved reference to &quot;Belt.Id&quot;"><code>Belt</code>.Id</span></p><p>Provide utiliites to create identified comparators or hashes for data structures used below.</p><p>It create a unique identifer per module of functions so that different data structures with slightly different comparison functions won't mix.</p></header><dl><dt class="spec type" id="type-hash"><a href="#type-hash" class="anchor"></a><code><span class="keyword">type </span>hash('a, 'id)</code><span class="keyword">;</span></dt><dd><p><code>('a, 'id) hash</code></p><p>Its runtime represenation is a <code>hash</code> function, but signed with a type parameter, so that different hash functions type mismatch</p></dd></dl><dl><dt class="spec type" id="type-eq"><a href="#type-eq" class="anchor"></a><code><span class="keyword">type </span>eq('a, 'id)</code><span class="keyword">;</span></dt><dd><p><code>('a, 'id) eq</code></p><p>Its runtime represenation is an <code>eq</code> function, but signed with a type parameter, so that different hash functions type mismatch</p></dd></dl><dl><dt class="spec type" id="type-cmp"><a href="#type-cmp" class="anchor"></a><code><span class="keyword">type </span>cmp('a, 'id)</code><span class="keyword">;</span></dt><dd><p><code>('a,'id) cmp</code></p><p>Its runtime representation is a <code>cmp</code> function, but signed with a type parameter, so that different hash functions type mismatch</p></dd></dl><dl><dt class="spec module-type" id="module-type-Comparable"><a href="#module-type-Comparable" class="anchor"></a><code><span class="keyword">module type </span><a href="module-type-Comparable">Comparable</a> = <span class="keyword">{</span> ... <span class="keyword">}</span><span class="keyword">;</span></code></dt><dd><p><code>('a,'id) cmp</code></p></dd></dl><dl><dt class="spec type" id="type-comparable"><a href="#type-comparable" class="anchor"></a><code><span class="keyword">type </span>comparable('key, 'id)</code><code><span class="keyword"> = </span>(<span class="keyword">module </span><a href="module-type-Comparable">Comparable</a> <span class="keyword">with</span> <span class="keyword">type </span><a href="module-type-Comparable#type-identity">identity</a> <span class="keyword">=</span> <span class="type-var">'id</span><span class="keyword"> and </span><span class="keyword">type </span><a href="module-type-Comparable#type-t">t</a> <span class="keyword">=</span> <span class="type-var">'key</span>)</code><span class="keyword">;</span></dt><dd><p><code>('key, 'id) cmparable</code> is a module of functions, here it only includes <code>cmp</code>.</p><p>Unlike normal functions, when created, it comes with a unique identity (guaranteed by the type system).</p><p>It can be created using function <a href="#val-comparableU"><code>comparableU</code></a> or<a href="#type-comparable"><code>comparable</code></a>.</p><p>The idea of a unique identity when created is that it makes sure two sets would type mismatch if they use different comparison function</p></dd></dl><div class="spec module" id="module-MakeComparableU"><a href="#module-MakeComparableU" class="anchor"></a><code><span class="keyword">module </span><a href="MakeComparableU">MakeComparableU</a>:  (<a href="MakeComparableU/argument-1-M">M</a>: <span class="keyword">{</span> ... <span class="keyword">}</span>) <span>=&gt;</span> <a href="#module-type-Comparable">Comparable</a><span class="keyword"> with </span><span class="keyword">type </span><a href="MakeComparableU#type-t">t</a><span class="keyword"> = </span><a href="MakeComparableU/argument-1-M#type-t">M.t</a><span class="keyword">;</span></code></div><div class="spec module" id="module-MakeComparable"><a href="#module-MakeComparable" class="anchor"></a><code><span class="keyword">module </span><a href="MakeComparable">MakeComparable</a>:  (<a href="MakeComparable/argument-1-M">M</a>: <span class="keyword">{</span> ... <span class="keyword">}</span>) <span>=&gt;</span> <a href="#module-type-Comparable">Comparable</a><span class="keyword"> with </span><span class="keyword">type </span><a href="MakeComparable#type-t">t</a><span class="keyword"> = </span><a href="MakeComparable/argument-1-M#type-t">M.t</a><span class="keyword">;</span></code></div><dl><dt class="spec value" id="val-comparableU"><a href="#val-comparableU" class="anchor"></a><code><span class="keyword">let </span>comparableU: cmp:Js.Internal.fn([ `Arity_2((<span class="type-var">'a</span><span class="keyword">, </span><span class="type-var">'a</span>)) ], int) <span>=&gt;</span> (<span class="keyword">module </span><a href="module-type-Comparable">Comparable</a> <span class="keyword">with</span> <span class="keyword">type </span><a href="module-type-Comparable#type-t">t</a> <span class="keyword">=</span> <span class="type-var">'a</span>)<span class="keyword">;</span></code></dt><dt class="spec value" id="val-comparable"><a href="#val-comparable" class="anchor"></a><code><span class="keyword">let </span>comparable: cmp:(<span class="type-var">'a</span> <span>=&gt;</span> <span class="type-var">'a</span> <span>=&gt;</span> int) <span>=&gt;</span> (<span class="keyword">module </span><a href="module-type-Comparable">Comparable</a> <span class="keyword">with</span> <span class="keyword">type </span><a href="module-type-Comparable#type-t">t</a> <span class="keyword">=</span> <span class="type-var">'a</span>)<span class="keyword">;</span></code></dt></dl><div class="spec module-type" id="module-type-Hashable"><a href="#module-type-Hashable" class="anchor"></a><code><span class="keyword">module type </span><a href="module-type-Hashable">Hashable</a> = <span class="keyword">{</span> ... <span class="keyword">}</span><span class="keyword">;</span></code></div><dl><dt class="spec type" id="type-hashable"><a href="#type-hashable" class="anchor"></a><code><span class="keyword">type </span>hashable('key, 'id)</code><code><span class="keyword"> = </span>(<span class="keyword">module </span><a href="module-type-Hashable">Hashable</a> <span class="keyword">with</span> <span class="keyword">type </span><a href="module-type-Hashable#type-identity">identity</a> <span class="keyword">=</span> <span class="type-var">'id</span><span class="keyword"> and </span><span class="keyword">type </span><a href="module-type-Hashable#type-t">t</a> <span class="keyword">=</span> <span class="type-var">'key</span>)</code><span class="keyword">;</span></dt><dd><p><code>('key, 'id) hashable</code> is a module of functions, here it only includes <code>hash</code>, <code>eq</code>.</p><p>Unlike normal functions, when created, it comes with a unique identity (guaranteed by the type system).</p><p>It can be created using function <a href="#val-hashableU"><code>hashableU</code></a> or <a href="#type-hashable"><code>hashable</code></a>.</p><p>The idea of a unique identity when created is that it makes sure two hash sets would type mismatch if they use different comparison function</p></dd></dl><div class="spec module" id="module-MakeHashableU"><a href="#module-MakeHashableU" class="anchor"></a><code><span class="keyword">module </span><a href="MakeHashableU">MakeHashableU</a>:  (<a href="MakeHashableU/argument-1-M">M</a>: <span class="keyword">{</span> ... <span class="keyword">}</span>) <span>=&gt;</span> <a href="#module-type-Hashable">Hashable</a><span class="keyword"> with </span><span class="keyword">type </span><a href="MakeHashableU#type-t">t</a><span class="keyword"> = </span><a href="MakeHashableU/argument-1-M#type-t">M.t</a><span class="keyword">;</span></code></div><div class="spec module" id="module-MakeHashable"><a href="#module-MakeHashable" class="anchor"></a><code><span class="keyword">module </span><a href="MakeHashable">MakeHashable</a>:  (<a href="MakeHashable/argument-1-M">M</a>: <span class="keyword">{</span> ... <span class="keyword">}</span>) <span>=&gt;</span> <a href="#module-type-Hashable">Hashable</a><span class="keyword"> with </span><span class="keyword">type </span><a href="MakeHashable#type-t">t</a><span class="keyword"> = </span><a href="MakeHashable/argument-1-M#type-t">M.t</a><span class="keyword">;</span></code></div><dl><dt class="spec value" id="val-hashableU"><a href="#val-hashableU" class="anchor"></a><code><span class="keyword">let </span>hashableU: hash:Js.Internal.fn([ `Arity_1(<span class="type-var">'a</span>) ], int) <span>=&gt;</span> eq:Js.Internal.fn([ `Arity_2((<span class="type-var">'a</span><span class="keyword">, </span><span class="type-var">'a</span>)) ], bool) <span>=&gt;</span> (<span class="keyword">module </span><a href="module-type-Hashable">Hashable</a> <span class="keyword">with</span> <span class="keyword">type </span><a href="module-type-Hashable#type-t">t</a> <span class="keyword">=</span> <span class="type-var">'a</span>)<span class="keyword">;</span></code></dt><dt class="spec value" id="val-hashable"><a href="#val-hashable" class="anchor"></a><code><span class="keyword">let </span>hashable: hash:(<span class="type-var">'a</span> <span>=&gt;</span> int) <span>=&gt;</span> eq:(<span class="type-var">'a</span> <span>=&gt;</span> <span class="type-var">'a</span> <span>=&gt;</span> bool) <span>=&gt;</span> (<span class="keyword">module </span><a href="module-type-Hashable">Hashable</a> <span class="keyword">with</span> <span class="keyword">type </span><a href="module-type-Hashable#type-t">t</a> <span class="keyword">=</span> <span class="type-var">'a</span>)<span class="keyword">;</span></code></dt></dl><dl><dt class="spec external" id="val-getHashInternal"><a href="#val-getHashInternal" class="anchor"></a><code><span class="keyword">external </span>getHashInternal: <a href="#type-hash">hash</a>(<span class="type-var">'a</span>, <span class="type-var">'id</span>) <span>=&gt;</span> Js.Internal.fn([ `Arity_1(<span class="type-var">'a</span>) ], int) = &quot;%identity&quot;<span class="keyword">;</span></code></dt><dd><p>/*</p></dd></dl><dl><dt class="spec external" id="val-getEqInternal"><a href="#val-getEqInternal" class="anchor"></a><code><span class="keyword">external </span>getEqInternal: <a href="#type-eq">eq</a>(<span class="type-var">'a</span>, <span class="type-var">'id</span>) <span>=&gt;</span> Js.Internal.fn([ `Arity_2((<span class="type-var">'a</span><span class="keyword">, </span><span class="type-var">'a</span>)) ], bool) = &quot;%identity&quot;<span class="keyword">;</span></code></dt><dt class="spec external" id="val-getCmpInternal"><a href="#val-getCmpInternal" class="anchor"></a><code><span class="keyword">external </span>getCmpInternal: <a href="#type-cmp">cmp</a>(<span class="type-var">'a</span>, <span class="type-var">'id</span>) <span>=&gt;</span> Js.Internal.fn([ `Arity_2((<span class="type-var">'a</span><span class="keyword">, </span><span class="type-var">'a</span>)) ], int) = &quot;%identity&quot;<span class="keyword">;</span></code></dt><dd><p>/*</p></dd></dl></div></body></html>