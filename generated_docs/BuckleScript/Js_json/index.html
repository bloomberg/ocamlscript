<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Js_json (BuckleScript.Js_json)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="..">Up</a> ‚Äì <a href="../">BuckleScript</a> &#x00BB; Js_json</nav><h1>Module <code>Js_json</code></h1><p>Efficient JSON encoding using JavaScript API</p><dl><dt>see <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON</a></dt><dd><p>MDN</p></dd></dl><nav class="toc"><ul><li><a href="#types">Types</a></li><li><a href="#accessor">Accessor</a></li><li><a href="#construtors">Construtors</a></li><li><a href="#string-conversion">String conversion</a></li></ul></nav></header><section><header><h2 id="types"><a href="#types" class="anchor"></a>Types</h2></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type </span>t</code><span class="keyword">;</span></dt><dd><p>The JSON data structure</p></dd></dl><dl><dt class="spec type" id="type-kind"><a href="#type-kind" class="anchor"></a><code><span class="keyword">type </span>kind(_)</code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-kind.String" class="anchored"><td class="def constructor"><a href="#type-kind.String" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">String</span> <span class="keyword">:</span> <a href="#type-kind">kind</a>(Js_string.t)</code></td></tr><tr id="type-kind.Number" class="anchored"><td class="def constructor"><a href="#type-kind.Number" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Number</span> <span class="keyword">:</span> <a href="#type-kind">kind</a>(float)</code></td></tr><tr id="type-kind.Object" class="anchored"><td class="def constructor"><a href="#type-kind.Object" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Object</span> <span class="keyword">:</span> <a href="#type-kind">kind</a>(Js_dict.t(<a href="#type-t">t</a>))</code></td></tr><tr id="type-kind.Array" class="anchored"><td class="def constructor"><a href="#type-kind.Array" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Array</span> <span class="keyword">:</span> <a href="#type-kind">kind</a>(array(<a href="#type-t">t</a>))</code></td></tr><tr id="type-kind.Boolean" class="anchored"><td class="def constructor"><a href="#type-kind.Boolean" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Boolean</span> <span class="keyword">:</span> <a href="#type-kind">kind</a>(bool)</code></td></tr><tr id="type-kind.Null" class="anchored"><td class="def constructor"><a href="#type-kind.Null" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Null</span> <span class="keyword">:</span> <a href="#type-kind">kind</a>(Js_types.null_val)</code></td></tr></table><span class="keyword">;</span></dt><dd><p>Underlying type of a JSON value</p></dd></dl><dl><dt class="spec type" id="type-tagged_t"><a href="#type-tagged_t" class="anchor"></a><code><span class="keyword">type </span>tagged_t</code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-tagged_t.JSONFalse" class="anchored"><td class="def constructor"><a href="#type-tagged_t.JSONFalse" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">JSONFalse</span></code></td></tr><tr id="type-tagged_t.JSONTrue" class="anchored"><td class="def constructor"><a href="#type-tagged_t.JSONTrue" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">JSONTrue</span></code></td></tr><tr id="type-tagged_t.JSONNull" class="anchored"><td class="def constructor"><a href="#type-tagged_t.JSONNull" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">JSONNull</span></code></td></tr><tr id="type-tagged_t.JSONString" class="anchored"><td class="def constructor"><a href="#type-tagged_t.JSONString" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">JSONString</span>(string)</code></td></tr><tr id="type-tagged_t.JSONNumber" class="anchored"><td class="def constructor"><a href="#type-tagged_t.JSONNumber" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">JSONNumber</span>(float)</code></td></tr><tr id="type-tagged_t.JSONObject" class="anchored"><td class="def constructor"><a href="#type-tagged_t.JSONObject" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">JSONObject</span>(Js_dict.t(<a href="#type-t">t</a>))</code></td></tr><tr id="type-tagged_t.JSONArray" class="anchored"><td class="def constructor"><a href="#type-tagged_t.JSONArray" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">JSONArray</span>(array(<a href="#type-t">t</a>))</code></td></tr></table><span class="keyword">;</span></dt></dl></section><section><header><h2 id="accessor"><a href="#accessor" class="anchor"></a>Accessor</h2></header><dl><dt class="spec value" id="val-classify"><a href="#val-classify" class="anchor"></a><code><span class="keyword">let </span>classify: <a href="#type-t">t</a> <span>=&gt;</span> <a href="#type-tagged_t">tagged_t</a><span class="keyword">;</span></code></dt><dt class="spec value" id="val-test"><a href="#val-test" class="anchor"></a><code><span class="keyword">let </span>test: <span class="type-var">'a</span> <span>=&gt;</span> <a href="#type-kind">kind</a>(<span class="type-var">'b</span>) <span>=&gt;</span> bool<span class="keyword">;</span></code></dt><dd><p><code>test v kind</code> returns true if <code>v</code> is of <code>kind</code></p></dd></dl><dl><dt class="spec value" id="val-decodeString"><a href="#val-decodeString" class="anchor"></a><code><span class="keyword">let </span>decodeString: <a href="#type-t">t</a> <span>=&gt;</span> option(Js_string.t)<span class="keyword">;</span></code></dt><dd><p><code>decodeString json</code> returns <code>Some s</code> if <code>json</code> is a string, <code>None</code> otherwise</p></dd></dl><dl><dt class="spec value" id="val-decodeNumber"><a href="#val-decodeNumber" class="anchor"></a><code><span class="keyword">let </span>decodeNumber: <a href="#type-t">t</a> <span>=&gt;</span> option(float)<span class="keyword">;</span></code></dt><dd><p><code>decodeNumber json</code> returns <code>Some n</code> if <code>json</code> is a number, <code>None</code> otherwise</p></dd></dl><dl><dt class="spec value" id="val-decodeObject"><a href="#val-decodeObject" class="anchor"></a><code><span class="keyword">let </span>decodeObject: <a href="#type-t">t</a> <span>=&gt;</span> option(Js_dict.t(<a href="#type-t">t</a>))<span class="keyword">;</span></code></dt><dd><p><code>decodeObject json</code> returns <code>Some o</code> if <code>json</code> is an object, <code>None</code> otherwise</p></dd></dl><dl><dt class="spec value" id="val-decodeArray"><a href="#val-decodeArray" class="anchor"></a><code><span class="keyword">let </span>decodeArray: <a href="#type-t">t</a> <span>=&gt;</span> option(array(<a href="#type-t">t</a>))<span class="keyword">;</span></code></dt><dd><p><code>decodeArray json</code> returns <code>Some a</code> if <code>json</code> is an array, <code>None</code> otherwise</p></dd></dl><dl><dt class="spec value" id="val-decodeBoolean"><a href="#val-decodeBoolean" class="anchor"></a><code><span class="keyword">let </span>decodeBoolean: <a href="#type-t">t</a> <span>=&gt;</span> option(bool)<span class="keyword">;</span></code></dt><dd><p><code>decodeBoolean json</code> returns <code>Some b</code> if <code>json</code> is a boolean, <code>None</code> otherwise</p></dd></dl><dl><dt class="spec value" id="val-decodeNull"><a href="#val-decodeNull" class="anchor"></a><code><span class="keyword">let </span>decodeNull: <a href="#type-t">t</a> <span>=&gt;</span> option(Js_null.t(<span class="type-var">'a</span>))<span class="keyword">;</span></code></dt><dd><p><code>decodeNull json</code> returns <code>Some null</code> if <code>json</code> is a null, <code>None</code> otherwise</p></dd></dl></section><section><header><h2 id="construtors"><a href="#construtors" class="anchor"></a>Construtors</h2></header><aside><p>Those functions allows the construction of an arbitrary complex JSON values.</p></aside><dl><dt class="spec external" id="val-null"><a href="#val-null" class="anchor"></a><code><span class="keyword">external </span>null: <a href="#type-t">t</a> =  &quot;BS:5.0.0-dev.2Ñï¶æ&#0;&#0;&#0;&#12;&#0;&#0;&#0;&#4;&#0;&#0;&#0;&#0;&#0;&#0;&#12;∞@@ê∞$null@@&quot;&quot;&quot;<span class="keyword">;</span></code></dt><dd><p><code>null</code> is the singleton null JSON value</p></dd></dl><dl><dt class="spec external" id="val-string"><a href="#val-string" class="anchor"></a><code><span class="keyword">external </span>string: string <span>=&gt;</span> <a href="#type-t">t</a> = &quot;%identity&quot;<span class="keyword">;</span></code></dt><dd><p><code>string s</code> makes a JSON string of the <code>string</code> <code>s</code></p></dd></dl><dl><dt class="spec external" id="val-number"><a href="#val-number" class="anchor"></a><code><span class="keyword">external </span>number: float <span>=&gt;</span> <a href="#type-t">t</a> = &quot;%identity&quot;<span class="keyword">;</span></code></dt><dd><p><code>number n</code> makes a JSON number of the <code>float</code> <code>n</code></p></dd></dl><dl><dt class="spec external" id="val-boolean"><a href="#val-boolean" class="anchor"></a><code><span class="keyword">external </span>boolean: bool <span>=&gt;</span> <a href="#type-t">t</a> = &quot;%identity&quot;<span class="keyword">;</span></code></dt><dd><p><code>boolean b</code> makes a JSON boolean of the <code>bool</code> <code>b</code></p></dd></dl><dl><dt class="spec external" id="val-object_"><a href="#val-object_" class="anchor"></a><code><span class="keyword">external </span>object_: Js_dict.t(<a href="#type-t">t</a>) <span>=&gt;</span> <a href="#type-t">t</a> = &quot;%identity&quot;<span class="keyword">;</span></code></dt><dd><p><code>object_ dict</code> makes a JSON objet of the <code>Js.Dict.t</code> <code>dict</code></p></dd></dl><dl><dt class="spec external" id="val-array"><a href="#val-array" class="anchor"></a><code><span class="keyword">external </span>array: array(<a href="#type-t">t</a>) <span>=&gt;</span> <a href="#type-t">t</a> = &quot;%identity&quot;<span class="keyword">;</span></code></dt><dd><p><code>array_ a</code> makes a JSON array of the <code>Js.Json.t array</code> <code>a</code></p></dd></dl><aside><p>The functions below are specialized for specific array type which happened to be already JSON object in the BuckleScript runtime. Therefore they are more efficient (constant time rather than linear conversion).</p></aside><dl><dt class="spec external" id="val-stringArray"><a href="#val-stringArray" class="anchor"></a><code><span class="keyword">external </span>stringArray: array(string) <span>=&gt;</span> <a href="#type-t">t</a> = &quot;%identity&quot;<span class="keyword">;</span></code></dt><dd><p><code>stringArray a</code> makes a JSON array of the <code>string array</code> <code>a</code></p></dd></dl><dl><dt class="spec external" id="val-numberArray"><a href="#val-numberArray" class="anchor"></a><code><span class="keyword">external </span>numberArray: array(float) <span>=&gt;</span> <a href="#type-t">t</a> = &quot;%identity&quot;<span class="keyword">;</span></code></dt><dd><p><code>numberArray a</code> makes a JSON array of the <code>float array</code> <code>a</code></p></dd></dl><dl><dt class="spec external" id="val-booleanArray"><a href="#val-booleanArray" class="anchor"></a><code><span class="keyword">external </span>booleanArray: array(bool) <span>=&gt;</span> <a href="#type-t">t</a> = &quot;%identity&quot;<span class="keyword">;</span></code></dt><dd><p><code>booleanArray</code> makes a JSON array of the <code>bool array</code> <code>a</code></p></dd></dl><dl><dt class="spec external" id="val-objectArray"><a href="#val-objectArray" class="anchor"></a><code><span class="keyword">external </span>objectArray: array(Js_dict.t(<a href="#type-t">t</a>)) <span>=&gt;</span> <a href="#type-t">t</a> = &quot;%identity&quot;<span class="keyword">;</span></code></dt><dd><p><code>objectArray a</code> makes a JSON array of the <code>JsDict.t array</code> <code>a</code></p></dd></dl></section><section><header><h2 id="string-conversion"><a href="#string-conversion" class="anchor"></a>String conversion</h2></header><dl><dt class="spec external" id="val-parseExn"><a href="#val-parseExn" class="anchor"></a><code><span class="keyword">external </span>parseExn: string <span>=&gt;</span> <a href="#type-t">t</a> =  &quot;BS:5.0.0-dev.2Ñï¶æ&#0;&#0;&#0;&#25;&#0;&#0;&#0;	&#0;&#0;&#0;&#28;&#0;&#0;&#0;&#26;∞††Bë@@@î¿%parse@@†$JSON@&quot;&quot;parse&quot;<span class="keyword">;</span></code></dt><dt class="spec external" id="val-stringify"><a href="#val-stringify" class="anchor"></a><code><span class="keyword">external </span>stringify: <a href="#type-t">t</a> <span>=&gt;</span> string =  &quot;BS:5.0.0-dev.2Ñï¶æ&#0;&#0;&#0;&#29;&#0;&#0;&#0;	&#0;&#0;&#0;&#29;&#0;&#0;&#0;&#27;∞††Bë@@@î¿)stringify@@†$JSON@&quot;&quot;stringify&quot;<span class="keyword">;</span></code></dt><dt class="spec external" id="val-stringifyWithSpace"><a href="#val-stringifyWithSpace" class="anchor"></a><code><span class="keyword">external </span>stringifyWithSpace: <a href="#type-t">t</a> <span>=&gt;</span> int <span>=&gt;</span> string =  &quot;BS:5.0.0-dev.2Ñï¶æ&#0;&#0;&#0;)&#0;&#0;&#0;&#16;&#0;&#0;&#0;/&#0;&#0;&#0;-∞††Bë@††ì@ëê@††B&#4;&#8;@@î¿)stringify@@†$JSON@&quot;&quot;stringify&quot;<span class="keyword">;</span></code></dt><dt class="spec external" id="val-stringifyAny"><a href="#val-stringifyAny" class="anchor"></a><code><span class="keyword">external </span>stringifyAny: <span class="type-var">'a</span> <span>=&gt;</span> option(string) =  &quot;BS:5.0.0-dev.2Ñï¶æ&#0;&#0;&#0;&#29;&#0;&#0;&#0;	&#0;&#0;&#0;&#29;&#0;&#0;&#0;&#27;∞††Bë@@Bî¿)stringify@@†$JSON@&quot;&quot;stringify&quot;<span class="keyword">;</span></code></dt></dl></section></div></body></html>